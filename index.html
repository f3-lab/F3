<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>F3 FOOD</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
font-family: Arial, sans-serif;
background:#f7f7f7;
padding:15px;
}

h1{
text-align:center;
}

.product{
background:white;
padding:10px;
margin:10px 0;
border-radius:10px;
box-shadow:0 2px 5px rgba(0,0,0,0.1);
}

button{
background:#27ae60;
color:white;
border:none;
padding:10px;
border-radius:8px;
width:100%;
margin-top:5px;
font-size:16px;
}

input{
width:100%;
padding:10px;
margin-top:10px;
border-radius:8px;
border:1px solid #ccc;
}

.cart{
margin-top:20px;
background:white;
padding:10px;
border-radius:10px;
}
</style>
</head>

<body>

<h1>ü•ü F3 FOOD</h1>

<div class="product">
<h3>–ü–µ–ª—å–º–µ–Ω–∏</h3>
<p>25 R$</p>
<button onclick="addToCart('–ü–µ–ª—å–º–µ–Ω–∏',25)">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>

<div class="product">
<h3>–í–∞—Ä–µ–Ω–∏–∫–∏</h3>
<p>20 R$</p>
<button onclick="addToCart('–í–∞—Ä–µ–Ω–∏–∫–∏',20)">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>

<div class="cart">
<h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
<div id="cart"></div>
<p><strong>–ò—Ç–æ–≥–æ: <span id="total">0</span> R$</strong></p>

<input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
<input id="address" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏">

<button onclick="sendOrder()">–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<script>

const tg = window.Telegram.WebApp;
tg.expand();

let cart = [];
let total = 0;
let userData = tg.initDataUnsafe.user || {};

function addToCart(name, price){

let existing = cart.find(item => item.name === name);

if(existing){
existing.qty += 1;
}else{
cart.push({name, price, qty:1});
}

total += price;
renderCart();
}

function renderCart(){

let cartDiv = document.getElementById("cart");
cartDiv.innerHTML = "";

cart.forEach(item=>{
cartDiv.innerHTML += `
<p>${item.name} x${item.qty} = ${item.price * item.qty} R$</p>
`;
});

document.getElementById("total").innerText = total;
}

function sendOrder(){

let phone = document.getElementById("phone").value;
let address = document.getElementById("address").value;

if(cart.length === 0){
alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è");
return;
}

if(phone === "" || address === ""){
alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –∞–¥—Ä–µ—Å");
return;
}

let itemsText = "";
cart.forEach(item => {
itemsText += `${item.name} x${item.qty} = ${item.price * item.qty} R$\n`;
});

let text =
`ü•ü –ù–æ–≤—ã–π –∑–∞–∫–∞–∑

üë§ ${userData.first_name || ""} @${userData.username || ""}
üì± ${phone}
üìç ${address}

${itemsText}
üí∞ –ò—Ç–æ–≥–æ: ${total} R$`;

let url = "https://t.me/kirillvist?text=" + encodeURIComponent(text);

if (tg && tg.openTelegramLink) {
    tg.openTelegramLink(url);
} else {
    window.open(url, "_blank");
}

}

</script>

</body>
</html>